@model EPMS.Web.ViewModels.JobTitle.JobTitleViewModel

@{
    ViewBag.Title = "JobTitleLV";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}


<style>
    .select2-choices {
        margin-top: -7px !important;
        width: 108% !important;
        margin-left: -12px !important;
    }
</style>

<link rel="stylesheet" type="text/css" href="~/Scripts/App/select2/select2.css"/>
<script type="text/javascript" src="~/Scripts/App/select2/select2.js"></script>
<div class="mainbar">
    <div class="page-head">
        <h2 class="pull-left">Job Title List View</h2>
        <div class="clearfix"></div>
        <div class="clearfix"></div>
    </div>
    <!-- Page heading ends -->
    <div class="container">
        <!-- Dashboard Graph starts -->
        <div class="row">
            <div class="col-md-12">
                <div class="customwidget">
                    <div class="customwidget-head">
                        &nbsp;
                        <a href="~/JobTitle/JobTitleLV">
                            <div class="pull-right"><input id="btnResetFltr" type="button" class="btn btn-danger" value="Reset" /></div>
                        </a>
                        &nbsp;
                        <div class="pull-right"><input id="btnFltr" type="button" class="btn btn-success" style="margin-right:15px;" value="Filter" /></div>
                        &nbsp;
                        <div class="customwidget-icons pull-left">
                            <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>Filters
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="customwidget-content">
                        <div class="">
                            <!-- Form starts.  -->
                            <table>
                                <tr class="filterrow">
                                    <td>
                                        <label class="control-label col-lg-12">Department Name</label>
                                    </td>
                                    <td class="ui-widget">
                                        @Html.DropDownListFor(model => model.Department.DepartmentId, new SelectList(Model.DepartmentList, "DepartmentId", "DepartmentNameE"), "", new { @class = "input-large form-control ui-widget select2me", Multiple = "multiple"})
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <!-- Dashboard Graph starts -->
        <div class="row">
            <div class="col-md-12">
                <div class="customwidget">
                    <div class="customwidget-head">
                    </div>
                    <div class="customwidget-content">
                        <table id="jobTable" class="table table-striped table-hover table-bordered dataTable no-footer responsive" style="border: 1px solid #ddd !important">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th title="Job Title">Job Title</th>
                                    <th title="Department Name">Department</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.JobTitleList != null)
                                {
                                    foreach (var item in Model.JobTitleList)
                                    {
                                <tr>
                                    <td>@item.JobId</td>
                                    <td>@item.JobTitleNameE</td>
                                    <td>@item.Department.DepartmentNameE</td>
                                </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        $('.select2me').select2({
            placeholder: "Select",
            allowClear: true
        });

        var oTable = $('#jobTable').dataTable({
            "sPaginationType": "full_numbers",
            "iDisplayLength": 2,
            "bFilter": true,
            "bLengthChange": false,
            "aoColumnDefs": [
                { 'bSortable': false, 'aTargets': [0] },
                {
                    "targets": [0],
                    "visible": false,
                    "searchable": false
                }
            ],
        });

        $('#btnFltr').on('click', function (e) {
            var deptValue = $("#Department_DepartmentId option:selected").text();
            if (deptValue == "" || deptValue == null) {
                toastr.error("Please select a Department");
                return false;
            } else {
                oTable.fnFilter(deptValue);
            }
            return true;

            //alert($('#Department_DepartmentId').val());
        });
        $('#btnResetFltr').on('click', function (e) {
            $('#Department_DepartmentId').val("");
            oTable.fnFilter('');
        });
    });
</script>