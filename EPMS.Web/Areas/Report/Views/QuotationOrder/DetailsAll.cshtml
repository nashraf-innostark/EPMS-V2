@using Newtonsoft.Json
@model EPMS.WebModels.ViewModels.Reports.QuotationOrderDetailViewModel
@{
    
    var direction = EPMS.WebModels.Resources.Shared.Common.TextDirection;
    ViewBag.Title = EPMS.WebModels.Resources.Reports.Reports.QOReportViewAll;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- Navigation Bar Start-->
<div class="breadcrumb-container">
    <ul class="xbreadcrumbs">
        <li>
            <a href="~/Dashboard/Index">
                <i class="icon-photon home"></i>
            </a>
        </li>
        <li>
            <a href="~/Report/CustomerService/Index">
                @EPMS.WebModels.Resources.Reports.CustomerServiceList.CustomerServiceReportList
            </a>
        </li>
        <li class="current">
            @EPMS.WebModels.Resources.Reports.Reports.QOReportViewAll
        </li>
    </ul>
</div>
<!-- Navigation Bar End-->
<!-- Page Heading Start-->
<header>
    <i class="icon-big-notepad"></i>
    <h2><small>@EPMS.WebModels.Resources.Reports.Reports.QOReportViewAll</small></h2>
</header>
<!-- Page Heading End-->
<!--Notifications begin-->
@Html.Partial("_Alert")
<!--Notifications end-->

<form class="form-horizontal">
    <div class="container-fluid">
       <div class="control-group row-fluid">
            <div class="span12">
                <table id="detailTable" class="table table-striped table-responsive">
                    <thead>
                        <tr>
                            <th>@EPMS.WebModels.Resources.Reports.Reports.Serial</th>
                            <th>@EPMS.WebModels.Resources.Reports.Reports.CustomerName</th>
                            <th>@EPMS.WebModels.Resources.Reports.Reports.QONoOfRFQs</th>
                            <th>@EPMS.WebModels.Resources.Reports.Reports.QONoOfOrders</th>
                            <th>@EPMS.WebModels.Resources.Reports.Reports.QOFromTo</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var qo in Model.QuotationOrderReports)
                        {
                            <tr>
                                <td>1</td>
                                <td>
                                    @(direction == "ltr" ? qo.CustomerNameE : qo.CustomerNameA)
                                </td>
                                <td>@qo.NoOfRFQ</td>
                                <td>@qo.NoOfOrders</td>
                                <td>@qo.ReportFromDateString - @qo.ReportToDateString</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <div class="control-group row-fluid">
            <div class="span3 span-inset">
                <a class="btn" href="~/Report/QuotationOrder/GeneratePdfAll?ReportId=@Model.ReportId">@EPMS.WebModels.Resources.Reports.CustomerReport.GenerateAsPDF</a>
            </div>
        </div>

    </div>
</form>


<script src="~/Scripts/html2canvas/html2canvas.js"></script>
<script>
    var img;
    var theCanvas;
    var reportId;
    $(document).ready(function () {
        reportId = '@Model.ReportId';
        $('#detailTable').dataTable({
            "sPaginationType": "bootstrap",
            "aoColumns": [
                null,
                null,
                null,
                null,
                null,
            ],
            "fnInitComplete": function () {
                $(".dataTables_wrapper select").select2({
                    dropdownCssClass: 'noSearch'
                });
            },
        });
        $("#simpleSelectBox").select2({
            dropdownCssClass: 'noSearch'
        });


        // html to canvas
        // here I am converting the html of graph to canvas
        html2canvas($("#chart_01"), {
            onrendered: function (canvas) {
                // save canvas
                theCanvas = canvas;
                var imgId = "report_" + reportId;
                SaveCanvasAsImage(theCanvas, imgId);
                UploadImage(imgId);
            }
        });

    });
</script>