@{
    ViewBag.Title = "Table";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <title>@ViewBag.Title</title>

    <link rel="shortcut icon" href="~/Images/favicon.ico" />
    <link rel="stylesheet" href="~/Content/css/photon.css" media="all" />
    <link rel="stylesheet" href="~/Content/css/photon-pt2.css" media="all" />
    @*<link rel="stylesheet" href="~/Content/css/photon-responsive.css" media="all" />*@

    <script type="text/javascript" src="~/Scripts/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jqueryui-1.10.0.min.js"></script>

    
    <script type="text/javascript" src="~/Scripts/plugins/jquery.flot.js"></script>
    <script type="text/javascript" src="~/Scripts/plugins/jquery.flot.stack.js"></script>
    <script type="text/javascript" src="~/Scripts/plugins/jquery.flot.pie.js"></script>
    <script type="text/javascript" src="~/Scripts/plugins/jquery.flot.resize.js"></script>
    <script type="text/javascript" src="~/Scripts/plugins/jquery.form.js"></script>
</head>
<body>
    <form class="form-horizontal" id="validation_form">
        <div class="container-fluid">
            <div class="control-group row-fluid">
                <!--Simple Chart begin-->
                <div class="control-group row-fluid">
                    <div class="span12 span-inset-more">
                        <div id="chart_01" style="height:250px;"></div>
                        <div id="choices" style="height:20px;"></div>
                    </div>
                </div>
                <!--Simple Chart end-->
            </div>
            <!--Input Field begin-->
            <div class="control-group row-fluid">
                <!--Sortable Responsive Media Table begin-->
                <div class="row-fluid">
                    <div class="span12">
                        <table class="table table-striped table-responsive" id="tableSortableResMed">
                            <thead class="cf sorthead">
                                <tr>
                                    <th>Serial</th>
                                    <th>Task Name</th>
                                    <th>Cost</th>
                                    <th>Start Date</th>
                                    <th>Delivery Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="gradeX">

                                    <td>1</td>
                                    <td> Website development and designing</td>

                                    <td>
                                        1000

                                    </td>
                                    <td>
                                        5/1/2015
                                    </td>
                                    <td>
                                        5/1/2015
                                    </td>
                                    <td>
                                        finished
                                    </td>

                                </tr>


                            </tbody>
                        </table>

                    </div>
                </div>
                <!--Sortable Responsive Media Table end-->
                <!--Sortable Responsive Media Table begin-->
                <div class="row-fluid">
                    <div class="span12">
                        <table class="table table-striped table-responsive" id="tableSortableResMed2">
                            <thead class="cf sorthead">
                                <tr>
                                    <th>Serial</th>
                                    <th>Sub Task Name</th>
                                    <th>Cost</th>
                                    <th>Start Date</th>
                                    <th>Delivery Date</th>
                                    <th>Assined to</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="gradeX">

                                    <td>1</td>
                                    <td> Printing requirements</td>

                                    <td>
                                        100

                                    </td>
                                    <td>
                                        5/1/2015
                                    </td>
                                    <td>
                                        5/1/2015
                                    </td>
                                    <td>
                                        Ali salih -
                                        noor Ihaq
                                    </td>
                                    <td>
                                        pending
                                    </td>

                                </tr>



                            </tbody>
                        </table>

                    </div>
                </div>
            </div>
            <!--Input Field end-->
        </div><!-- end container -->

    </form>
    <script type="text/javascript">
    $(window).load(function () {



        var markings = [

{ color: "Red", lineWidth: 1, xaxis: { from: 1299301600000, to: 1299301600000 } }
        ];
        var datasets = {

            "Cost": {
                label: "Cost",
                data: [[1249301600000, 200000], [1349301600000, 200000]]

            },
            "SubTask1": {
                label: "SubTask1",
                data: [[1249301600000, 500000], [1249901600000, 500000]]

            },
            "SubTask2": {
                label: "SubTask2",
                data: [[1249901600000, 500000], [1259901600000, 500000]]

            },
            "SubTask3": {
                label: "SubTask3",
                data: [[1259901600000, 500000], [1299901600000, 500000]]

            }


        };

        var i = 0;
        $.each(datasets, function (key, val) {
            val.color = i;
            ++i;
        });

        // insert checkboxes
        var choiceContainer = $("#choices");
        $.each(datasets, function (key, val) {
            choiceContainer.append("<input type='checkbox' style='float:left;margin-left: 20px;' name='" + key +
				"' checked='checked' id='id" + key + "'></input>" +
				"<label style='float:left;'for='id" + key + "'>"
				+ val.label + "</label>");
        });


        choiceContainer.find("input").click(plotAccordingToChoices);
        function plotAccordingToChoices() {

            var data = [];
            var dataArray = []

            var xmaxl = 0;
            var xminl = 500000000;
            var ymaxl = 0;
            var yminl = 500000000;
            choiceContainer.find("input:checked").each(function () {
                var xmax = 0;
                var xmin = 5000000000;
                var ymax = 0;
                var ymin = 5000000000;
                var key = $(this).attr("name");
                var datalenght = datasets[key].data.length;

                for (n = 0; n < datalenght; n++) {

                    var x = datasets[key].data[n] + "";

                    var d = x.split(',');
                    var d1 = parseInt(d[0]);
                    var d2 = parseInt(d[1]);
                    // alert(x);
                    if (xmax < d1) {
                        xmax = d1;
                    }
                    if (xmin > d1) {
                        xmin = d1;
                    }
                    if (ymax < d2) {
                        ymax = d2;
                    }
                    if (ymin > d2) {
                        ymin = d2;
                    }

                }

                if (xmaxl < xmax) {
                    xmaxl = xmax;
                }
                if (xminl > xmin) {
                    xminl = xmin;
                }
                if (ymaxl < ymax) {
                    ymaxl = ymax;
                }
                if (yminl > ymin) {
                    yminl = ymin;
                }



                if (key && datasets[key]) {
                    data.push(datasets[key]);
                }


            });

            var xzoomMin = xminl; var xZoomMax = xmaxl; var xPanMin = xminl; var xPanMax = xmaxl; var yzoomMin = yminl; var yZoomMax = ymaxl; var yPanMin = yminl; var yPanMax = ymaxl;
            if (data.length > 0) {
                $.plot("#chart_01", data, {
                    series: {
                        lines: { show: true, fill: true }
                    },
                    grid: { hoverable: true, clickable: true, borderWidth: 1, color: '#bbb', markings: markings },

                    xaxis: {
                        mode: "time",
                        timeformat: "%y,%m",
                        zoomRange: [xzoomMin, xZoomMax],
                        panRange: [xPanMin, xPanMax]
                    },
                    yaxis: {
                        zoomRange: [yzoomMin, yZoomMax],
                        panRange: [yPanMin, yPanMax]
                    },
                    zoom: {
                        interactive: true
                    },
                    pan: {
                        interactive: true
                    }

                }

				);
            }
        }

        plotAccordingToChoices();
        // drawByChoice(datasets);

        $("<div id='tooltip'></div>").css({
            position: "absolute",
            "z-index": "500",
            display: "none",
            border: "1px solid #fdd",
            padding: "2px",
            "background-color": "#fee",
            opacity: 0.80
        }).appendTo("body");

        $("#chart_01").bind("plothover", function (event, pos, item) {
            var str = "(" + pos.x.toFixed(2) + ", " + pos.y.toFixed(2) + ")";

            $("#hoverdata").text(str);
            if (item) {
                var DATE_FORMAT = "%y,%m";
                var x = $.plot.formatDate(new Date(item.datapoint[0]), DATE_FORMAT),
                    y = item.datapoint[1];

                $("#tooltip").html(item.series.label + " of " + y + " in " + x)
                    .css({ top: item.pageY + 5, left: item.pageX + 5 })
                    .fadeIn(200);
            } else {
                $("#tooltip").hide();
            }

        });

        $("#chart_01").bind("plotpan", function (event, plot) {
            var axes = plot.getAxes();
            $(".message").html("Panning to x: " + axes.xaxis.min.toFixed(2)
			+ " &ndash; " + axes.xaxis.max.toFixed(2)
			+ " and y: " + axes.yaxis.min.toFixed(2)
			+ " &ndash; " + axes.yaxis.max.toFixed(2));
        });

        $("#chart_01").bind("plotzoom", function (event, plot) {
            var axes = plot.getAxes();
            $(".message").html("Zooming to x: " + axes.xaxis.min.toFixed(2)
			+ " &ndash; " + axes.xaxis.max.toFixed(2)
			+ " and y: " + axes.yaxis.min.toFixed(2)
			+ " &ndash; " + axes.yaxis.max.toFixed(2));
        });

        // drawGraphs();
    });





    </script>
</body>
</html>