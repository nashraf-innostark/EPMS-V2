@model EPMS.WebModels.ViewModels.Reports.TaskReportDetailVeiwModel

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var direction = EPMS.WebModels.Resources.Shared.Common.TextDirection;
    int serialX = 1;
    int serialY = 1;
}

<div class="breadcrumb-container">
    <ul class="xbreadcrumbs">
        <li>
            <a href="dashboard-En.html">
                <i class="icon-photon home"></i>
            </a>
        </li>
        <li>
            <a href="Employees(Admin)En.html">
                Project Management Report List
            </a>
        </li>
        <li class="current">
            <a href="javascript:;">View Task Report</a>


        </li>
    </ul>
</div>
<header>
    <i class="icon-big-notepad"></i>
    <h2><small>View Task Report</small></h2>
</header>

<form class="form-horizontal" id="validation_form">
    <div class="container-fluid">
        <div class="control-group row-fluid">
            <!--Simple Chart begin-->
            <div class="control-group row-fluid">
                <div class="span12 span-inset-more">
                    <div id="chart_01" style="height:250px;"></div>
                    <div id="choices" style="height:20px;"></div>
                </div>
            </div>
            <!--Simple Chart end-->
        </div>
        <div class="control-group row-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <table class="table table-striped table-responsive" id="tableProjectTasks">
                        <thead class="cf sorthead">
                            <tr>
                                <th>Serial</th>
                                <th>Task Name</th>
                                <th>Cost</th>
                                <th>Start Date</th>
                                <th>Delivery Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var tasks in Model.ProjectTasks)
                            {
                                <tr class="gradeX">
                                    <td>@(serialX++)</td>
                                    <td>@(direction == "ltr" ? tasks.TaskNameE : tasks.TaskNameA)</td>
                                    <td>@tasks.TotalCost</td>
                                    <td>@tasks.StartDate</td>
                                    <td>@tasks.EndDate</td>
                                    <td>-</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <table class="table table-striped table-responsive" id="tableProjectSubTasks">
                        <thead class="cf sorthead">
                            <tr>
                                <th>Serial</th>
                                <th>Sub Task Name</th>
                                <th>Cost</th>
                                <th>Start Date</th>
                                <th>Delivery Date</th>
                                <th>Assined to</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var subTasks in Model.SubTasks)
                            {
                                <tr class="gradeX">
                                    <td>@(serialY++)</td>
                                    <td>@(direction == "ltr" ? subTasks.TaskNameE : subTasks.TaskNameA)</td>
                                    <td>@subTasks.TotalCost</td>
                                    <td>@subTasks.StartDate</td>
                                    <td>@subTasks.EndDate</td>
                                    <td>
                                        @foreach (var emp in subTasks.TaskEmployees)
                                        {
                                            @:@(direction == "ltr" ? emp.EmployeeNameEn : emp.EmployeeNameAr)
                                        }
                                    </td>
                                    <td></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="control-group row-fluid">
            <div class="span3 span-inset">
                <button type="button" class="btn">Generate Report As PDF</button>
            </div>
        </div>
    </div><!-- end container -->
</form>

<script>
    $(document).ready(function () {
        $('#tableProjectTasks,#tableProjectSubTasks').dataTable({
            "sPaginationType": "bootstrap",
            "fnInitComplete": function () {
                $(".dataTables_wrapper select").select2({
                    dropdownCssClass: 'noSearch'
                });
            }
        });
    });
</script>