@using System.Configuration
@using System.Globalization
@model EPMS.WebModels.ViewModels.Reports.CustomerCreateViewModel
@{
    ViewBag.Title = EPMS.WebModels.Resources.Reports.CustomerReport.DetailTitle;
    Layout = "~/Views/Shared/_Layout.cshtml";
    var direction = EPMS.WebModels.Resources.Shared.Common.TextDirection;
    var serial = 0;
}
<!-- Navigation Bar Start-->
<div class="breadcrumb-container">
    <ul class="xbreadcrumbs">
        <li>
            <a href="~/Dashboard/Index">
                <i class="icon-photon home"></i>
            </a>
        </li>
        <li>
            <a href="@(ConfigurationManager.AppSettings["SiteURL"].ToString())/Report/CustomerService/Index">
                @EPMS.WebModels.Resources.Reports.CustomerServiceList.Title
            </a>
        </li>
        <li class="current">
            @EPMS.WebModels.Resources.Reports.CustomerReport.DetailTitle
        </li>
    </ul>
</div>
<!-- Navigation Bar End-->
<!-- Page Heading Start-->
<header>
    <i class="icon-big-notepad"></i>
    <h2><small>@EPMS.WebModels.Resources.Reports.CustomerReport.DetailTitle</small></h2>
</header>
<!-- Page Heading End-->
<!--Notifications begin-->
@Html.Partial("_Alert")
<!--Notifications end-->

<form class="form-horizontal">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                @Html.HiddenFor(m=>m.ReportId, new {@id = "ReportId"})
                <table id="CustomerList" class="table table-striped table-responsive">
                    <thead>
                        <tr>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.Serial</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.CustomerName</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.Mobile</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.Email</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.FromTo</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.CustomerSince</th>
                            <th>@EPMS.WebModels.Resources.Reports.CustomerReport.NoOfComplaints</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var customer in @Model.Customers.ToList())
                        {
                            serial = serial + 1;
                            <tr>
                                <td>@serial</td>
                                <td>
                                    @if (direction == "ltr")
                                    {
                                        @customer.CustomerNameE
                                    }
                                    else
                                    {
                                        @customer.CustomerNameA
                                    }
                                </td>
                                <td>@customer.CustomerMobile</td>
                                <td>@customer.Email</td>
                                <td>
                                    @if (customer.RecCreatedDt != null)
                                    {
                                        @(direction == "ltr" ? customer.RecCreatedDt.Value.ToString("dd/MM/yyyy", new CultureInfo("en")) : customer.RecCreatedDt.Value.ToString("dd/MM/yyyy", new CultureInfo("ar")))
                                    }
                                </td>
                                <td>
                                    @if (customer.RecCreatedDt != null)
                                    {
                                        @(direction == "ltr" ? customer.RecCreatedDt.Value.ToString("dd/MM/yyyy", new CultureInfo("en")) : customer.RecCreatedDt.Value.ToString("dd/MM/yyyy", new CultureInfo("ar")))
                                    }
                                </td>
                            <td>@customer.ComplaintsCount</td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <div class="control-group row-fluid">
            <div class="span3 span-inset">
                <a class="btn" href="~/Report/Customer/GeneratePdfAll?ReportId=@Model.ReportId">@EPMS.WebModels.Resources.Reports.CustomerReport.GenerateAsPDF</a>
            </div>

        </div>

    </div>
</form>


<script>
    $(document).ready(function () {
        debugger;
        var reportId = '@Model.ReportId';
        $('#ReportId').val(reportId);
        $('#CustomerList').dataTable({
            "sPaginationType": "bootstrap",
            "aoColumns": [
                null, // cloumn to be hide
                null, // not hide
                null,
                null,
                null,
                null,
                null
            ],
            "fnInitComplete": function () {
                $(".dataTables_wrapper select").select2({
                    dropdownCssClass: 'noSearch'
                });
            },
        });
        $("#simpleSelectBox").select2({
            dropdownCssClass: 'noSearch'
        });
    });
</script>